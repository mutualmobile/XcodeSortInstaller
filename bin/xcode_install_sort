#!/usr/bin/ruby

require 'xcode_install_sort'
require 'optparse'
require 'fileutils'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: install-sort-phase.rb [options]"

  opts.on("-v", "--[no-]verbose", "Run verbosely") do |v|
    options[:verbose] = v
  end
  
  opts.on("-p", "--project-file LOC", "Location of .xcodeproj file") do |p|
    options[:proj_file_loc] = File.expand_path(p)
  end
  
  opts.on_tail("-h", "--help", "Show this message") do
    puts opts
    exit
  end
end.parse!

project_location = options[:proj_file_loc]

if project_location
  installer = XcodeInstallSort::XcodeSortInstaller.new(project_location) do |i|
    i.verbose = options[:verbose]
  end
  
  installer.install_sort_on_project
else
  puts "No project file specified. Specify the location of a project file with \"-p\""
end
